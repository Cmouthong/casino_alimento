<div>
  <h2>Gestión de Consumos</h2>
  <form (ngSubmit)="guardarConsumo()">
    <label for="cedulaEmpleado">Cédula Empleado:</label>
    <input [(ngModel)]="consumo.cedulaEmpleado" name="cedulaEmpleado" required />

    <label for="fecha">Fecha:</label>
    <input [(ngModel)]="consumo.fecha" name="fecha" type="date" required />

    <label for="plato">Plato:</label>
    <select [(ngModel)]="platoSeleccionado" name="plato">
      <option *ngFor="let plato of platos" [value]="plato.nombre">
        {{ plato.nombre }}
      </option>
    </select>

    <label for="cantidad">Cantidad:</label>
    <input [(ngModel)]="cantidad" name="cantidad" type="number" min="1" required />

    <div class="button-group">
      <button type="button" class="btn-primary" (click)="agregarPlato()">
        Añadir Plato
      </button>
      <button type="button" class="btn-primary" (click)="guardarConsumo()">
        {{ editando ? 'Actualizar Consumo' : 'Guardar Consumo' }}
      </button>
    </div>
  </form>

  <h3>Consumos Registrados</h3>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Fecha</th>
        <th>Empleado</th>
        <th>Platos</th>
        <th>Total</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let consumo of consumos">
        <td>{{ consumo.id }}</td>
        <td>{{ consumo.fecha | date }}</td>
        <td>{{ consumo.cedulaEmpleado }}</td>
        <td>
          <ul>
            <li *ngFor="let plato of consumo.platosConsumidos">
              {{ plato.nombrePlato }} - Cantidad: {{ plato.cantidad }}
            </li>
          </ul>
        </td>
        <td>{{ consumo.total | currency }}</td>
        <td>
          <button (click)="editarConsumo(consumo)">Editar</button>
          <button (click)="eliminarConsumo(consumo.id)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
