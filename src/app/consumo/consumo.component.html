<div class="consumo-container">
  <h1>Gestión de Consumos</h1>
  <form (ngSubmit)="guardarConsumo()">
    <div class="form-group">
      <label for="cedulaEmpleado">Cédula Empleado:</label>
      <input
        type="text"
        id="cedulaEmpleado"
        [(ngModel)]="consumo.cedulaEmpleado"
        name="cedulaEmpleado"
        required
      />
    </div>

    <div class="form-group">
      <label for="fecha">Fecha:</label>
      <input
        type="date"
        id="fecha"
        [(ngModel)]="consumo.fecha"
        name="fecha"
        required
      />
    </div>

    <div class="form-group">
      <label for="plato">Plato:</label>
      <select id="plato" [(ngModel)]="platoSeleccionado" name="plato" required>
        <option value="" disabled>Seleccione un plato</option>
        <option *ngFor="let plato of platos" [value]="plato.nombre">
          {{ plato.nombre }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="cantidad">Cantidad:</label>
      <input
        type="number"
        id="cantidad"
        [(ngModel)]="cantidad"
        name="cantidad"
        min="1"
        required
      />
    </div>

    <div class="button-group">
      <button type="button" class="btn-primary" (click)="agregarPlato()">
        Añadir Plato
      </button>
      <button type="submit" class="btn-primary">
        {{ editando ? 'Actualizar Consumo' : 'Guardar Consumo' }}
      </button>
    </div>
  </form>

  <h2>Consumos Registrados</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Fecha</th>
        <th>Empleado</th>
        <th>Platos</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let consumo of consumos">
        <td>{{ consumo.id }}</td>
        <td>{{ consumo.fecha | date }}</td>
        <td>{{ consumo.cedulaEmpleado }}</td>
        <td>
          <ul>
            <li *ngFor="let plato of consumo.platosConsumidos">
              {{ plato.nombrePlato }} - Cantidad: {{ plato.cantidad }}
            </li>
          </ul>
        </td>
        <td>{{ consumo.total | currency }}</td>
      </tr>
    </tbody>
  </table>
</div>
